{% if tasks %}
<ul class="list-group shadow-sm">
  {% for task in tasks %}
  <li class="list-group-item d-flex justify-content-between align-items-start flex-wrap">
    <div class="me-3">
      <a href="{% url 'task_detail' task.id %}" class="fw-semibold text-decoration-none text-dark">
        {{ task.title }}
      </a><br>
      <small class="text-muted">
        {% if task.due_date %}<strong>–î–µ–¥–ª–∞–π–Ω:</strong> {{ task.due_date|date:"d.m.Y" }} |{% endif %}
        <strong>–°—Ç–∞—Ç—É—Å:</strong>
        {% if task.status == "done" %}
          –í—ã–ø–æ–ª–Ω–µ–Ω–∞
        {% elif task.task_type == "approval" %}
          –ù–∞ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–∏
        {% else %}
          {{ task.get_status_display }}
        {% endif %}
        <strong>| –ê–≤—Ç–æ—Ä:</strong> {{ task.created_by.user.get_full_name }} |
        <strong>–û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –≤:</strong> {{ task.created_at|date:"H.m d.m.Y" }}

      </small><br>
      <small class="text-muted">
        üë§ –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å:
        {% if task.assigned_employee %}
          {{ task.assigned_employee.user.get_full_name|default:task.assigned_employee.user.username }}
        {% else %}
          ‚Äî
        {% endif %}
      </small>
    </div>

    <span class="badge rounded-pill
      {% if task.task_type == 'approval' %}bg-success
      {% elif task.task_type == 'review' %}bg-primary
      {% elif task.status == 'in_progress' %}bg-warning text-dark
      {% elif task.status == 'under_review' %}bg-purple
      {% elif task.status == 'sent_for_review' %}bg-purple
      {% elif task.status == 'new' %}bg-secondary
      {% elif task.status == 'done' %}bg-success
      {% elif task.priority == '–û—Ç–∫–ª–æ–Ω–µ–Ω–∞' %}bg-warning{% endif %}">
      {% if task.status == "done" %}
        –í—ã–ø–æ–ª–Ω–µ–Ω–∞
      {% elif task.task_type == "approval" %}
        –ù–∞ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–∏
      {% else %}
        {{ task.get_status_display }}
      {% endif %}
    </span>
  </li>
  {% endfor %}
</ul>
{% else %}
<div class="alert alert-secondary">–ü–æ–∫–∞ –Ω–µ—Ç –∑–∞–¥–∞—á –¥–ª—è —ç—Ç–æ–≥–æ —Ñ–∏–ª—å—Ç—Ä–∞.</div>
{% endif %}
